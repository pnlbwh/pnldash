#+PROPERTY: header-args:R  :session *R* :exports results

#+BEGIN_SRC R :results value silent
require(data.table)
paths <- fread('paths.csv')
params <- fread('params.csv')
#+END_SRC


#+BEGIN_SRC R :results output html
require(xtable)
#require(knitr)
paths.grouped <- paths[,.(completed=sum(exists), total=.N), by=.(projectPath, pathKey, paramId)]
paths.grouped[,
{
cat("<h2>",projectPath, paramId, "</h2>")
pp=projectPath
pi=paramId
paramCombo = params[projectPath==pp & paramId==pi, .(parameter=param, "parameter value"=paramValue),]
print(xtable(paramCombo), type="html", include.rownames=F)
cat("<br>")
print(xtable(.SD), type="html", include.rownames=F)
#print(kable(c(.SD, paramCombo), "html", booktabs=T, padding=2), type="html", include.rownames=F)
}
, by=.(projectPath,paramId)]

#+END_SRC

#+BEGIN_SRC R :colnames yes
require(knitr)
require(data.table)
paths <- fread('paths.csv')
params <- fread('params.csv')
paths.grouped <- paths[,.(completed=sum(exists), total=.N), by=.(projectPath, pathKey, paramId)]

out = NULL

d <- paths.grouped[,
{
#cat("##",projectPath, paramId)
pp=projectPath
pi=paramId
paramCombo = params[projectPath==pp & paramId==pi, .(parameter=param, "parameter value"=paramValue),]
#knitr::kable(paramCombo)
#knitr::kable(.SD)
knit_expand(text='### {{projectPath}}')
}
, by=.(projectPath,paramId)]
str(d[,V1])
#+END_SRC

#+RESULTS:
